<!--
Google IO 2012/2013 HTML5 Slide Template

Authors: Eric Bidelman <ebidel@gmail.com>
         Luke Mahé <lukem@google.com>

URL: https://code.google.com/p/io-2012-slides
-->
<!DOCTYPE html>
<html>
<head>
  <title>Testes de unidade na prática</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">-->
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
  <!--This one seems to work all the time, but really small on ipad-->
  <!--<meta name="viewport" content="initial-scale=0.4">-->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="stylesheet" media="all" href="theme/css/default.css">
  <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="theme/css/phone.css">
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->
  <script data-main="js/slides" src="js/require-1.0.8.min.js"></script>
</head>
<body style="opacity: 0">

<slides class="layout-widescreen">
  <slide class="title-slide segue nobackground">

    <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
    <hgroup class="auto-fadein">
      <h1 data-config-title><!-- populated from slide_config.json --></h1>
      <h2 data-config-subtitle><!-- populated from slide_config.json --></h2>
      <p data-config-presenter><!-- populated from slide_config.json --></p>
    </hgroup>
    <img src="images/meritt_logo_medium.png" style="position: absolute; right: 60px; bottom: 90px; width: 290px">
  </slide>

  <slide class="nobackground">
    <hgroup style="padding-left: 150px; margin-top: 100px; position: relative;">
      <h2>Tiago Furtado</h2>
      <h3 style="line-height: 1.1">
        Mestre em Ciência da Computação<br>
        Universidade Federal de Viçosa (UFV)
      </h3>
      <img src="images/tiago.png" style="border-radius: 50%; left: 0; position: absolute; top: -5px;">
    </hgroup>
    <article class="me-slide">
      <div class="centered" style="margin-top: 50px;">
        <img src="images/meritt_logo_medium.png"><br>
        <img src="images/jungle_logo.png">
        <img src="images/assistemas_logo.png"><br>
        <img src="images/unopar_logo.png">
      </div>
    </article>
  </slide>

  <slide class="fill nobackground" style="background-image: url(images/meritt_view.jpg); background-position: center top">
    <aside class="note">
      <section>
        <ul>
          <li>Startup sediada em Florianópolis</li>
          <li>Dados educacionais relativos ao <b>aprendizado</b> dos alunos</li>
          <li>tecnologias escaláveis</li>
          <li>Intuitivas, excelente experiência para o usuário</li>
        </ul>
      </section>
    </aside>
    <article>
      <p class="centered" style="margin-top: 75px;">
        <img src="images/meritt_logo.png">
      </p>
    </article>
  </slide>

  <slide class="nobackground meritt-dark">
    <aside class="note">
      <section>
        <ul>
          <li>Testes de software / unidade</li>
          <li>TDD</li>
          <li>Cobertura de testes</li>
          <li>Testes de unidade na Meritt</li>
          <li>Considerações finais</li>
        </ul>
      </section>
    </aside>
    <article class="flexbox vcenter">
      <h2>Vamos falar de coisa boa?</h2>
    </article>
  </slide>

  <slide class="segue dark nobackground">
    <aside class="gdbar"><img src="images/meritt_icon_128.png"></aside>

    <hgroup class="auto-fadein">
      <h2>Testes de unidade</h2>
    </hgroup>
  </slide>

  <slide class="fill nobackground" style="background-image: url(images/what.gif)">
    <aside class="note">
      <section>
        <p>Antes, é preciso falar de TESTES</p>
      </section>
    </aside>
    <article></article>
  </slide>

  <slide class="segue dark nobackground">
    <aside class="gdbar"><img src="images/meritt_icon_128.png"></aside>
    <aside class="note">
      <section>
        <p>O que é teste? Teste é uma forma de avaliar a funcionalidade do software</p>
        <p>Ajuda na construção, mas <b>não garante</b> qualidade</p>
        <p>Feito em vários níveis</p>
      </section>
    </aside>
    <hgroup class="auto-fadein">
      <h2>Testes de <span class="removed">unidade</span> software</h2>
    </hgroup>
  </slide>

  <slide>
    <hgroup>
      <h2>Testes de software</h2>
    </hgroup>
    <article class="flexbox vcenter">
      <img src="images/blackbox-whitebox.jpg">
    </article>
  </slide>

  <slide>
    <aside  class="note">
      <section>
        <p>Muita ênfase em automação de testes de UI e testes <b>manuais</b></p>
        <p><b>Falta de experiência</b> em escrever testes de nível mais baixo ou trabalhar com <b>código legado</b></p>
      </section>
    </aside>
    <hgroup>
      <h2>Testes de software</h2>
    </hgroup>
    <article class="centered">
      <img src="images/test-cone.png" style="height: 500px">
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Testes de software</h2>
    </hgroup>
    <article class="centered">
      <img src="images/test-pyramid.png">
    </article>
    <footer class="source">
      Martin Fowler. <a href="http://martinfowler.com/bliki/TestPyramid.html">martinfowler.com/bliki/TestPyramid.html</a>, 2012.
    </footer>
  </slide>

  <slide>
    <hgroup>
      <h2>Testes de software</h2>
    </hgroup>
    <article class="centered">
      <img src="images/test-pyramid-cone.png" style="height: 500px;">
    </article>
  </slide>

  <slide class="segue dark nobackground">
    <aside class="gdbar"><img src="images/meritt_icon_128.png"></aside>
    <aside class="note">
      <section>
        <p><b>&gt; 10min</b></p>
        <ul>
          <li>Pequenos trechos de código</li>
          <li>Escritos na mesma linguagem do produto</li>
          <li>Com o objetivo de testar a menor unidade do software</li>
        </ul>
      </section>
    </aside>
    <hgroup class="auto-fadein">
      <h2>Testes de unidade</h2>
      <h3 class="build">
        <span>O que são?</span>
        <span class="removed">Onde vivem?</span>
        <span class="removed">De que se alimentam?</span>
      </h3>
    </hgroup>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <p>Os exemplos de código serão em <b>PHP</b></p>
      </section>
    </aside>
    <hgroup>
      <h2>Testes de unidade</h2>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="php">
interface CalculatorInterface {
  <b>public function sum($first, $second);</b>
  public function subtract($first, $second);
}

class Calculator implements CalculatorInterface { /* ... */ }

class CalculatorTest {
  /** @test */
  <b>public function sumShouldReturnTheSumOfTwoNumbers() {
    $calculator = new Calculator();
    $result = $calculator->sum(1, 2);
    if ($result !== 3) {
        throw new Exception("Something wrong's not right ¯\_(ツ)_/¯");
    }
  }</b>
}</pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Testes de unidade</h2>
      <h3>Por quê?</h3>
    </hgroup>
    <article>
      <ul class="build">
        <li>Software livre de defeitos <b>deveria ser</b> sempre entregue</li>
        <li>
          Mas...
          <ul class="build">
            <li>software é muito complexo</li>
            <li>pessoas são imperfeitas! ><"</li>
            <p class="centered"><img src="images/shit-happens.jpg" alt="s**t happens" title="s**t happens"></p>
          </ul>
        </li>
      </ul>
    </article>
  </slide>

  <slide class="segue dark quote nobackground">
    <aside class="gdbar right bottom"><img src="images/meritt_icon_128.png"></aside>
    <article class="flexbox vleft auto-fadein">
      <q>
        O todo é maior do que a simples soma das suas partes.
      </q>
      <div class="author">
        Aristóteles
      </div>
    </article>
  </slide>

  <slide class="nobackground">
    <hgroup>
      <h2>Testes de unidade</h2>
      <h3>Por quê?</h3>
    </hgroup>
    <article>
      <p>Garantir a correção das partes</p>
      <pre class="prettyprint" data-lang="php">
interface PersonInterface {
    public function canBeArrested();
}

class Person implements PersonInterface {
    <b>public function __construct($age);</b>
    /*...*/
}

(new Person(17))->canBeArrested();
(new Person(18))->canBeArrested();
(new Person(19))->canBeArrested();
<b>(new Person(-1))->canBeArrested();
(new Person(0))->canBeArrested();
(new Person("RUKM?"))->canBeArrested();</b></pre>
    </article>
  </slide>

  <slide class="nobackground">
    <hgroup>
      <h2>Testes de unidade</h2>
      <h3>Por quê?</h3>
    </hgroup>
    <article>
      <p>Ampliar a capacidade de análise do todo</p>
      <pre class="prettyprint" data-lang="php">
interface PersonInterface { /*...*/ }
class Person implements PersonInterface {
    <b>public function __construct($age);</b>
    /*...*/
}

interface PoliceInterface {
    <b>public function arrest(PersonInterface $person);</b>
}
class Police implements PoliceInterface { /*...*/ }

$police = new Police();
<b>$police->arrest(new Person(15));
$police->arrest(new Person(19));</b>
</pre>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <p>Quem nunca imprimiu resultados intermediários?</p>
        <p>"Passei por aqui" em instruções de controle?</p>
      </section>
    </aside>
    <hgroup>
      <h2>Testes de unidade</h2>
      <h3>Como?</h3>
    </hgroup>
    <article class="build">
      <p>Manualmente</p>
      <pre class="prettyprint" data-lang="php">
function sum($a, $b) {
    return <b>$a + 0;</b>
}

printf("sum(%d, %d) = %d [%d]\n", 0, 0, sum(0, 0), 0);
printf("sum(%d, %d) = %d [%d]\n", 1, 0, sum(1, 0), 1);
printf("sum(%d, %d) = %d [%d]\n", 0, 1, sum(0, 1), 1);</pre>
      <pre class="terminal">
sum(0, 0) = 0 [0]
sum(1, 0) = 1 [1]
<b>sum(0, 1) = 0 [1]</b></pre>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <p><b>Debugar</b> também é uma forma de verificação manual</p>
      </section>
    </aside>
    <hgroup>
      <h2>Testes de unidade</h2>
      <h3>Como?</h3>
    </hgroup>
    <article>
      <p>Manualmente</p>
      <pre class="prettyprint" data-lang="php">
function sum($a, $b) {
    return <b>$a + $b;</b>
}

printf("sum(%d, %d) = %d [%d]\n", 0, 0, sum(0, 0), 0);
printf("sum(%d, %d) = %d [%d]\n", 1, 0, sum(1, 0), 1);
printf("sum(%d, %d) = %d [%d]\n", 0, 1, sum(0, 1), 1);</pre>
      <pre class="terminal">
sum(0, 0) = 0 [0]
sum(1, 0) = 1 [1]
<b>sum(0, 1) = 1 [1]</b></pre>
    </article>
  </slide>

  <slide class="fill nobackground" style="background-image: url(images/eyes.gif)">
  </slide>

  <slide class="nobackground">
    <aside class="note">
      <section>
        <p>Forma pseudomanual</p>
        <p>~Automática~</p>
      </section>
    </aside>
    <hgroup>
      <h2>Testes de unidade</h2>
    </hgroup>
    <article class="build">
      <pre class="prettyprint" data-lang="php">
1  &lt;?php
2  function sum($a, $b) {
3      return 0 + $b;
4  }
5
6  function sumTest($a, $b, $c) {
7      <b>if (sum($a, $b) === $c) { return; }
8      throw new Exception(/*...*/);</b>
9  }
10 sumTest(0, 0, 0);
<b>11 sumTest(1, 0, 1);</b>
12 sumTest(0, 1, 1);</pre>
      <pre class="terminal">
<b>PHP Fatal error:  Uncaught exception 'Exception' in sumTest.php:8</b>
Stack trace:
<b>#0 sumTest.php(11): sumTest(1, 0, 1)</b>
#1 {main}
  <b>thrown in sumTest.php on line 8</b></pre>
    </article>
  </slide>

  <slide class="nobackground">
    <aside class="note">
      <section>
        <p>Um framework de testes é um conjunto de ferramentas que agilizam e automatizam a criação de testes</p>
      </section>
    </aside>
    <hgroup>
      <h2>Testes de unidade</h2>
      <h3>Como?</h3>
    </hgroup>
    <article class="build">
      <p>Usando um framework de testes</p>
      <pre class="prettyprint" data-lang="php">
class Calculator {
    public function sum($a, $b) {
        return $a + $b;
    }
}

class CalculatorTest <b>extends PHPUnit_Framework_TestCase</b> {
    /** @test */
    public function sumTest() {
        <b>$this->assertSame(0, sum(0, 0));
        $this->assertSame(1, sum(1, 0));
        $this->assertSame(1, sum(0, 1));</b>
    }
}</pre>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <ul>
          <li>Repetitivo</li>
          <li>Trabalhoso</li>
          <li>Repetitivo (Oh, wait!)</li>
          <li>Propenso a erros</li>
          <li>Já disse que é repetitivo?</li>
        </ul>
      </section>
    </aside>
    <hgroup>
      <h2>Testes de unidade</h2>
      <h3>Como?</h3>
    </hgroup>
    <article class="flexbox vcenter">
      <p>Manualmente</p>
      <img src="images/repetitivo.gif">
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <ul>
          <li>Continua sendo trabalhoso</li>
          <li>Menos repetitivo</li>
          <li>Mas ainda assim, repetitivo</li>
        </ul>
      </section>
    </aside>
    <hgroup>
      <h2>Testes de unidade</h2>
      <h3>Como?</h3>
    </hgroup>
    <article class="flexbox vcenter">
      <p>~Automático~</p>
      <img src="images/boring.gif">
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <ul>
          <li>O "trabalho sujo" já foi feito</li>
          <li>Padronização</li>
          <li>Suporte nativo em IDEs</li>
        </ul>
      </section>
    </aside>
    <hgroup>
      <h2>Testes de unidade</h2>
      <h3>Como?</h3>
    </hgroup>
    <article class="flexbox vcenter">
      <p>Usando um framework de testes</p>
      <img src="images/the-right-way.png" style="max-height: 60%;">
    </article>
  </slide>

  <slide class="meritt-dark">
    <article class="flexbox vcenter">
      <h2>E quando um objeto interage com outro?</h2>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <p>&gt; 30min/p>
        <p>Fakes: apenas implementam a interface</p>
        <p>Mocks: verificam contexto da chamada e altera saída</p>
        <p>Stubs (<b>toco</b>): métodos para imitir comportamento</p>
      </section>
    </aside>
    <article class="flexbox vcenter">
      <h2>Objetos dublês!</h2>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Testes de unidade</h2>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="php">
class Police implements PoliceInterface {
    public function arrest(<b>PersonInterface $person</b>) {
        if (! <b>$person->canBeArrested()</b>) {
            throw new Exception(/*...*/);
        }
    }
}</pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Testes de unidade</h2>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="php">
class PoliceTest extends PHPUnit_Framework_TestCase {
  /** @test */
  public function arrestShouldThrowException<b>IfPersonCantBeArrested</b>() {
    <b>$person = $this->getMockForAbstractClass(PersonInterface::class);
    $person->expects($this->once())
           ->method('canBeArrested')
           ->willReturn(false);</b>

    $this->setExpectedException(Exception::class);

    $police = new Police();
    $police->arrest($person);
  }
}</pre>
    </article>
  </slide>

  <slide class="meritt-dark">
    <aside class="note">
      <section>
        <p>Funcionalidades legadas - Código legado (sem testes)</p>
        <ul>
          <li>Sempre que for necessário fazer uma alteração em uma classe</li>
          <li>O quanto antes!</li>
        </ul>
        <p>Funcionalidades novas - código novo</p>
        <ul>
          <li><b>Antes</b> de acrescentar uma nova funcionalidade</li>
        </ul>
      </section>
    </aside>
    <article class="flexbox vcenter">
      <h2>Quando escrevê-los?!</h2>
    </article>
  </slide>

  <slide class="fill nobackground" style="background-image: url(images/always.gif)">
  </slide>

  <slide class="segue dark nobackground">
    <aside class="gdbar"><img src="images/meritt_icon_128.png"></aside>
    <aside class="note">
      <section>
        <p>Abordagem do tipo "test-first"</p>
      </section>
    </aside>
    <hgroup class="auto-fadein">
      <h2 style="line-height: 1.15;">TDD<br>Test-driven development</h2>
    </hgroup>
  </slide>

  <slide>
    <hgroup>
      <h2>Test-driven development (TDD)</h2>
      <h3>Princípios</h3>
    </hgroup>
    <article class="flexbox vcenter">
        <h3 class="build"><span>KISS</span><span>: <b>K</b>eep <b>I</b>t <b>S</b>imple, <b>S</b>tupid</span></h3>
        <h3 class="build"><span>YAGNI</span><span>: <b>Y</b>ou <b>A</b>ren't <b>G</b>onna <b>N</b>eed <b>I</b>t</span></h3>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <p>Baby steps:</p>
        <ol>
          <li>1. Escrever um teste</li>
          <li>2. Garantir que o novo teste <b>falha</b></li>
          <li>3. Escrever código</li>
          <li>4. Garantir que os testes <b>passam</b></li>
          <li>5. Refatorar o código</li>
          <li>6. Repetir</li>
        </ol>
      </section>
    </aside>
    <hgroup>
      <h2>Test-driven development (TDD)</h2>
    </hgroup>
    <article class="centered">
      <img src="images/tdd-cycle.png" alt="Test-driven development" style="height: 500px;">
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Test-driven development (TDD)</h2>
      <h3>1. Escrever um teste</h3>
    </hgroup>
    <article class="build">
      <pre class="prettyprint" data-lang="php">
class CalculatorTest extends PHPUnit_Framework_TestCase
{
    /**
     * @test
     */
    public function sumTest()
    {
    }
}</pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Test-driven development (TDD)</h2>
      <h3>2. Garantir que o novo teste <b>falha</b></h3>
    </hgroup>
    <article class="build">
      <pre class="terminal build">
$ <span>./vendor/bin/phpunit --bootstrap ./vendor/autoload.php
    test/CalculatorTest.php</span>
<span>PHPUnit 4.5-gf75e6b2 by Sebastian Bergmann.

.

Time: 75 ms, Memory: 2.75Mb

<b>OK (1 test, 0 assertions)</b></span></pre>
      <img src="images/wrong.gif" style="position: absolute; bottom: 250px; right: 60px;">
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Test-driven development (TDD)</h2>
      <h3>2. Garantir que o novo teste <b>falha</b></h3>
    </hgroup>
    <article class="build">
      <pre class="prettyprint" data-lang="php">
class CalculatorTest extends PHPUnit_Framework_TestCase
{
    /**
     * @test
     */
    public function sumTest()
    {
        $calculator = <b>new Calculator();</b>
    }
}</pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Test-driven development (TDD)</h2>
      <h3>2. Garantir que o novo teste <b>falha</b></h3>
    </hgroup>
    <article class="build">
      <pre class="terminal build">
$ <span>./vendor/bin/phpunit --bootstrap ./vendor/autoload.php
    test/CalculatorTest.php</span>
<span>PHPUnit 4.5-gf75e6b2 by Sebastian Bergmann.

<b>PHP Fatal error:
  Class 'TFurtado\UnitTestSample\Calculator' not found
  in .../test/CalculatorTest.php on line 19</b>
PHP Stack trace:
PHP   1. {main}() ./vendor/phpunit/phpunit/phpunit:0
    ...</span></pre>
    </article>
  </slide>

  <slide class="fill nobackground" style="background-image: url(images/taserto.jpg)">
  </slide>

  <slide>
    <hgroup>
      <h2>Test-driven development (TDD)</h2>
      <h3>3. Escrever código</h3>
    </hgroup>
    <article class="build">
      <pre class="prettyprint" data-lang="php">
class Calculator
{

}</pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Test-driven development (TDD)</h2>
      <h3>4. Garantir que os testes <b>passam</b></h3>
    </hgroup>
    <article>
      <pre class="terminal build">
$ <span>./vendor/bin/phpunit --bootstrap ./vendor/autoload.php
    test/CalculatorTest.php</span>
<span>PHPUnit 4.5-gf75e6b2 by Sebastian Bergmann.

.

Time: 65 ms, Memory: 2.75Mb

<b>OK (1 test, 0 assertions)</b></span></pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Test-driven development (TDD)</h2>
      <h3>5. Refatorar o código</h3>
    </hgroup>
    <article class="flexbox vcenter build">
      <img src="images/question.png">
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Test-driven development (TDD)</h2>
      <h3>Repetir...</h3>
    </hgroup>
    <article class="centered">
      <img src="images/againagain.gif" style="height: 420px">
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Test-driven development (TDD)</h2>
      <h3>1. Escrever um teste</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="php">
class CalculatorTest extends PHPUnit_Framework_TestCase
{
    /**
     * @test
     */
    public function sumTest()
    {
        $calculator = new Calculator();
        <b>$this->assertSame(3, $calculator->sum(1, 2));</b>
    }
}</pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Test-driven development (TDD)</h2>
      <h3>2. Garantir que o novo teste <b>falha</b></h3>
    </hgroup>
    <article>
      <pre class="terminal">
$ ./vendor/bin/phpunit --bootstrap ./vendor/autoload.php
    test/CalculatorTest.php
PHPUnit 4.5-gf75e6b2 by Sebastian Bergmann.

<b>PHP Fatal error:  Call to undefined method
    TFurtado\UnitTestSample\Calculator::sum()
    in .../test/CalculatorTest.php on line 20</b>
PHP Stack trace:
PHP   1. {main}() ./vendor/phpunit/phpunit/phpunit:0
    ...</pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Test-driven development (TDD)</h2>
      <h3>3. Escrever código</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="php">
class Calculator
{
    <b>public function sum($a, $b)
    {
        $sum = 3;
        return $sum;
    }</b>
}</pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Test-driven development (TDD)</h2>
      <h3>4. Garantir que os testes <b>passam</b></h3>
    </hgroup>
    <article class="build">
      <pre class="terminal">
$ ./vendor/bin/phpunit --bootstrap ./vendor/autoload.php
    test/CalculatorTest.php
PHPUnit 4.5-gf75e6b2 by Sebastian Bergmann.

.

Time: 77 ms, Memory: 2.75Mb

<b>OK (1 test, 1 assertion)</b></pre>
      <img src="images/ok.png" style="bottom: 50px; position: absolute; right: 20px; width: 30%;">
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Test-driven development (TDD)</h2>
      <h3>5. Refatorar o código</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="php">
class Calculator
{
    public function sum($a, $b)
    {
        <span class="removed">$sum = 3;</span>
        <span class="removed">return $sum;</span>
        <b>return 3</b>;
    }
}</pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Test-driven development (TDD)</h2>
      <h3>5. Refatorar o código</h3>
    </hgroup>
    <article>
      <pre class="terminal">
$ ./vendor/bin/phpunit --bootstrap ./vendor/autoload.php
    test/CalculatorTest.php
PHPUnit 4.5-gf75e6b2 by Sebastian Bergmann.

.

Time: 87 ms, Memory: 2.75Mb

OK (1 test, 1 assertion)</pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Test-driven development (TDD)</h2>
      <h3>Repetir...</h3>
    </hgroup>
    <article class="centered">
      <img src="images/tdd-cycle-simple.jpg" style="height: 420px">
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Test-driven development (TDD)</h2>
      <h3>1. Escrever um teste</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="php">
class CalculatorTest extends PHPUnit_Framework_TestCase
{
    /**
     * @test
     */
    public function sumTest()
    {
        $calculator = new Calculator();
        $this->assertSame(3, $calculator->sum(1, 2));
        <b>$this->assertSame(4, $calculator->sum(2, 2));</b>
    }
}</pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Test-driven development (TDD)</h2>
      <h3>2. Garantir que o novo teste <b>falha</b></h3>
    </hgroup>
    <article>
      <pre class="terminal">
$ ./vendor/bin/phpunit --bootstrap ./vendor/autoload.php
    test/CalculatorTest.php
PHPUnit 4.5-gf75e6b2 by Sebastian Bergmann.

<b>F</b>
Time: 76 ms, Memory: 3.00Mb
<b>There was 1 failure:

1) TFurtado\UnitTestSample\CalculatorTest::sumTest
Failed asserting that 3 is identical to 4.

.../test/CalculatorTest.php:21

FAILURES!
Tests: 1, Assertions: 2, Failures: 1.</b></pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Test-driven development (TDD)</h2>
      <h3>3. Escrever código</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="php">
class Calculator
{
    <b>public function sum($a, $b)
        {
            <span class="removed">return 3;</span>
            $sum = $a + $b;
            return $sum;
        }</b>
}</pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Test-driven development (TDD)</h2>
      <h3>4. Garantir que os testes <b>passam</b></h3>
    </hgroup>
    <article>
      <pre class="terminal">
$ ./vendor/bin/phpunit --bootstrap ./vendor/autoload.php
    test/CalculatorTest.php
PHPUnit 4.5-gf75e6b2 by Sebastian Bergmann.

.

Time: 90 ms, Memory: 2.75Mb

<b>OK (1 test, 2 assertions)</b></pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Test-driven development (TDD)</h2>
      <h3>5. Refatorar o código</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="php">
class Calculator
{
    public function sum($a, $b)
    {
        <span class="removed">$sum = $a + $b;</span>
        <span class="removed">return $sum</span>;
        <b>return $a + $b</b>;
    }
}</pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Test-driven development (TDD)</h2>
      <h3>5. Refatorar o código</h3>
    </hgroup>
    <article>
      <pre class="terminal">
$ ./vendor/bin/phpunit --bootstrap ./vendor/autoload.php
    test/CalculatorTest.php
PHPUnit 4.5-gf75e6b2 by Sebastian Bergmann.

.

Time: 87 ms, Memory: 2.75Mb

OK (1 test, 1 assertion)</pre>
      <img src="images/ok2.png" style="bottom: 50px; position: absolute; right: 20px; width: 30%;">
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Test-driven development (TDD)</h2>
      <h3>Repetir...</h3>
    </hgroup>
    <article class="centered">
      <img src="images/repetir.gif" style="height: 420px">
    </article>
  </slide>

  <slide class="segue dark nobackground">
    <aside class="gdbar"><img src="images/meritt_icon_128.png"></aside>
    <aside class="note">
      <section>
        <p>&gt; 45min</p>
      </section>
    </aside>
    <hgroup class="auto-fadein">
      <h2>Cobertura de testes</h2>
    </hgroup>
  </slide>

  <slide>
    <article class="flexbox vcenter">
      <h2 class="centered" style="line-height: 1.2;">Quanto do software deve estar coberto por testes de unidade?</h2>
      <div class="build centered">
        <h3>100%!</h3> <h3>TODO!</h3> <h3>O software INTEIRO!</h3>
        <p style="font-size: 0.8em; margin: 10px;">Deu pra endenter, né?</p>
      </div>
    </article>
  </slide>

  <slide class="meritt-dark">
    <aside class="note">
      <section>
        <p>Não dá pra garantir :-(</p>
        <ul>
          <li>Praticando TDD rigorosamente</li>
          <li>Automatizando a execução dos testes</li>
        </ul>
      </section>
    </aside>
    <article class="flexbox vcenter">
      <h2 class="centered">Como garantir 100% de cobertura de testes?</h2>
    </article>
  </slide>

  <slide class="fill nobackground" style="background-image: url(images/cry.png)">
    <aside class="note">
      <section>
        <p>Não dá pra garantir :-(</p>
        <ul>
          <li>Praticando TDD rotineira e rigorosamente</li>
          <li>Fazendo com que os testes se tornem parte do produto</li>
          <li>Introduzindo testes como parte integrante indissociável do processo de desenvolvimento</li>
          <li>Automatizando a execução dos testes</li>
        </ul>
      </section>
    </aside>
    <article>
    </article>
  </slide>

  <slide class="segue dark nobackground">
    <aside class="gdbar"><img src="images/meritt_icon_128.png"></aside>
    <aside class="note">
      <section>
        <p>Objetivo: cobertura de 100%</p>
        <ul>
          <li>Fazem parte da rotina de desenvolvimento</li>
          <li>Integrados ao processo de build</li>
        </ul>
      </section>
    </aside>
    <hgroup class="auto-fadein">
      <h2>Testes de unidade na Meritt</h2>
    </hgroup>
  </slide>

  <slide>
    <hgroup>
      <h2>Testes de unidade na Meritt</h2>
      <h3>Status</h3>
    </hgroup>
    <article>
      <img src="images/status-2.png" style="width: 100%;">
      <img src="images/status-4.png">
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Testes de unidade na Meritt</h2>
      <h3>Status</h3>
    </hgroup>
    <article>
      <img src="images/status-1.png" style="width: 100%;">
      <img src="images/status-3.png">
    </article>
  </slide>

  <slide class="segue dark nobackground">
    <aside class="gdbar"><img src="images/meritt_icon_128.png"></aside>
    <hgroup class="auto-fadein">
      <h2>Considerações finais</h2>
    </hgroup>
  </slide>

  <slide>
    <hgroup>
      <h2>Considerações finais</h2>
    </hgroup>
    <article>
      <p>Testes de unidade são...</p>
      <ul class="build">
        <li>... essenciais para garantir a manutenibilidade do software</li>
        <li>... instrumentos de simples implementação</li>
        <li>... muito valiosos para criar um produto de qualidade</li>
        <li>... uma importante forma de documentação técnica</li>
        <li>... divertidos! Por que não?</li>
      </ul>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Considerações finais</h2>
    </hgroup>
    <article>
      <p>Testes de unidade <b>não</b> são...</p>
      <ul class="build">
        <li>... a abordagem definitiva para testes de software</li>
        <li>... uma garantia de qualidade do produto final</li>
        <li>... a solução mágica para software mal arquitetado</li>
      </ul>
    </article>
  </slide>

  <slide class="nobackground">
    <article class="centered">
      <h2 style="margin-bottom: 40px;">Temos vagas!</h2>
      <img src="images/job-1.png" style="max-height: 37%;">
      <img src="images/job-2.png" style="max-height: 37%;"><br>
      <img src="images/job-4.png" style="max-height: 37%;">
      <img src="images/job-3.png" style="max-height: 37%;">
      <p style="margin-top: 25px;"><a href="http://meritt.recruiterbox.com">meritt.recruiterbox.com</a></p>
    </article>
  </slide>

  <slide class="segue dark quote nobackground">
    <aside class="gdbar right bottom"><img src="images/meritt_icon_128.png"></aside>
    <article class="flexbox vleft auto-fadein">
      <q>
        Pay attention to zeros. If there is a zero, someone will divide by it.
      </q>
      <div class="author">
        Cem Kaner
      </div>
    </article>
  </slide>

  <slide class="thank-you-slide segue nobackground">
    <!--<aside class="gdbar right"><img src="images/meritt_icon_128.png"></aside>-->
    <aside></aside>
    <article class="flexbox vleft auto-fadein">
      <img src="images/tiago_cartoon.png" style="width: 100px; margin-top: -70px;">
      <h2>Muito obrigado!</h2>
      <img src="images/meritt_logo_white.png" style="bottom: 80px; position: absolute; right: 95px; width: 225px;">
    </article>
    <p class="auto-fadein">
      <a href="mailto:tfurtado@gmail.com">tfurtado@gmail.com</a><br>
      <a href="https://speakerdeck.com/tfurtado">speakerdeck.com/tfurtado</a><br>
      <a href="http://github.com/tfurtado">github.com/tfurtado</a><br>
      <a href="http://meritt.com.br">meritt.com.br</a>
    </p>
  </slide>

  <slide class="backdrop"></slide>

</slides>

<script>
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-55718943-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

<!--[if IE]>
  <script src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"></script>
  <script>CFInstall.check({mode: 'overlay'});</script>
<![endif]-->
</body>
</html>
